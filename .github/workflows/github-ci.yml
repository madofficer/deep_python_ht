name: GitHub Actions Config

on: [push, pull_request]

jobs:
  build_ht_01:
    name: Build and Test for ht_01
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-python@v5.2.0
      with:
        python-version: '3.12'
        cache: 'pip'

    - name: Install dependencies
      working-directory: ./ht_01
      run: |
        python -m pip install --upgrade pip
        pip install -r ../requirements.txt

    - name: Check flake8 for ht_01
      working-directory: ./ht_01
      run: flake8 .

    - name: Check pylint for ht_01
      working-directory: ./ht_01
      run: pylint $(find . -name "*.py" | xargs)

    - name: Run tests with pytest and check coverage for ht_01
      working-directory: ./ht_01
      run: |
        coverage run -m pytest 

    - name: Check test coverage for ht_01
      working-directory: ./ht_01
      run: coverage report -m

  build_ht_02:
    name: Build and Test for ht_02
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-python@v5.2.0
      with:
        python-version: '3.12'
        cache: 'pip'

    - name: Install dependencies
      working-directory: ./ht_02
      run: |
        python -m pip install --upgrade pip
        pip install -r ../requirements.txt

    - name: Check flake8 for ht_02
      working-directory: ./ht_02
      run: flake8 .

    - name: Check pylint for ht_02
      working-directory: ./ht_02
      run: pylint $(find . -name "*.py" | xargs)

    - name: Run tests with pytest and check coverage for ht_02
      working-directory: ./ht_02
      run: |
        coverage run -m pytest 

    - name: Check test coverage for ht_02
      working-directory: ./ht_02
      run: coverage report -m
